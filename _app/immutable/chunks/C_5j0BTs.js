import{i as k,b as $,h as I,c as D,O as J,a as j,v as Y,r as ee,H as re,s as B,d as b,k as L,Q as ne,R as ae,T as V,e as fe,U as T,j as z,V as ie,l as se,M as oe,W as le,X as U,Y as ue,Z as te,u as ve,_ as q,$ as ce,f as K,p as P,a0 as F,a1 as de,a2 as pe,g as _e,a3 as ge,a4 as Q,a5 as he,a6 as Ee,a7 as Te,a8 as Ae,a9 as Ne,aa as Se}from"./CflqnHjc.js";function xe(e,n){return n}function me(e,n,a){for(var u=[],t=n.length,l,o=n.length,_=0;_<t;_++){let E=n[_];P(E,()=>{if(l){if(l.pending.delete(E),l.done.add(E),l.pending.size===0){var v=e.outrogroups;y(U(l.done)),v.delete(l),v.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var s=u.length===0&&a!==null;if(s){var c=a,f=c.parentNode;pe(f),f.append(c),e.items.clear()}y(n,!s)}else l={pending:new Set(n),done:new Set},(e.outrogroups??=new Set).add(l)}function y(e,n=!0){for(var a=0;a<e.length;a++)_e(e[a],n)}var X;function Le(e,n,a,u,t,l=null){var o=e,_=new Map,s=(n&Q)!==0;if(s){var c=e;o=I?D(J(c)):c.appendChild(k())}I&&j();var f=null,E=oe(()=>{var i=a();return le(i)?i:i==null?[]:U(i)}),v,p=!0;function N(){r.fallback=f,Ie(r,v,o,n,u),f!==null&&(v.length===0?(f.f&T)===0?K(f):(f.f^=T,x(f,null,o)):P(f,()=>{f=null}))}var C=$(()=>{v=Y(E);var i=v.length;let M=!1;if(I){var w=ee(o)===re;w!==(i===0)&&(o=B(),D(o),b(!1),M=!0)}for(var h=new Set,S=fe,R=se(),g=0;g<i;g+=1){I&&L.nodeType===ne&&L.data===ae&&(o=L,M=!0,b(!1));var m=v[g],H=u(m,g),d=p?null:_.get(H);d?(d.v&&V(d.v,m),d.i&&V(d.i,g),R&&S.unskip_effect(d.e)):(d=Ce(_,p?o:X??=k(),m,H,g,t,n,a),p||(d.e.f|=T),_.set(H,d)),h.add(H)}if(i===0&&l&&!f&&(p?f=z(()=>l(o)):(f=z(()=>l(X??=k())),f.f|=T)),i>h.size&&ie(),I&&i>0&&D(B()),!p)if(R){for(const[W,Z]of _)h.has(W)||S.skip_effect(Z.e);S.oncommit(N),S.ondiscard(()=>{})}else N();M&&b(!0),Y(E)}),r={effect:C,items:_,outrogroups:null,fallback:f};p=!1,I&&(o=L)}function O(e){for(;e!==null&&(e.f&de)===0;)e=e.next;return e}function Ie(e,n,a,u,t){var l=(u&Ee)!==0,o=n.length,_=e.items,s=O(e.effect.first),c,f=null,E,v=[],p=[],N,C,r,i;if(l)for(i=0;i<o;i+=1)N=n[i],C=t(N,i),r=_.get(C).e,(r.f&T)===0&&(r.nodes?.a?.measure(),(E??=new Set).add(r));for(i=0;i<o;i+=1){if(N=n[i],C=t(N,i),r=_.get(C).e,e.outrogroups!==null)for(const d of e.outrogroups)d.pending.delete(r),d.done.delete(r);if((r.f&T)!==0)if(r.f^=T,r===s)x(r,null,a);else{var M=f?f.next:s;r===e.effect.last&&(e.effect.last=r.prev),r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),A(e,f,r),A(e,r,M),x(r,M,a),f=r,v=[],p=[],s=O(f.next);continue}if((r.f&F)!==0&&(K(r),l&&(r.nodes?.a?.unfix(),(E??=new Set).delete(r))),r!==s){if(c!==void 0&&c.has(r)){if(v.length<p.length){var w=p[0],h;f=w.prev;var S=v[0],R=v[v.length-1];for(h=0;h<v.length;h+=1)x(v[h],w,a);for(h=0;h<p.length;h+=1)c.delete(p[h]);A(e,S.prev,R.next),A(e,f,S),A(e,R,w),s=w,f=R,i-=1,v=[],p=[]}else c.delete(r),x(r,s,a),A(e,r.prev,r.next),A(e,r,f===null?e.effect.first:f.next),A(e,f,r),f=r;continue}for(v=[],p=[];s!==null&&s!==r;)(c??=new Set).add(s),p.push(s),s=O(s.next);if(s===null)continue}(r.f&T)===0&&v.push(r),f=r,s=O(r.next)}if(e.outrogroups!==null){for(const d of e.outrogroups)d.pending.size===0&&(y(U(d.done)),e.outrogroups?.delete(d));e.outrogroups.size===0&&(e.outrogroups=null)}if(s!==null||c!==void 0){var g=[];if(c!==void 0)for(r of c)(r.f&F)===0&&g.push(r);for(;s!==null;)(s.f&F)===0&&s!==e.fallback&&g.push(s),s=O(s.next);var m=g.length;if(m>0){var H=(u&Q)!==0&&o===0?a:null;if(l){for(i=0;i<m;i+=1)g[i].nodes?.a?.measure();for(i=0;i<m;i+=1)g[i].nodes?.a?.fix()}me(e,g,H)}}l&&he(()=>{if(E!==void 0)for(r of E)r.nodes?.a?.apply()})}function Ce(e,n,a,u,t,l,o,_){var s=(o&ue)!==0?(o&te)===0?ve(a,!1,!1):q(a):null,c=(o&ce)!==0?q(t):null;return{v:s,i:c,e:z(()=>(l(n,s??a,c??t,_),()=>{e.delete(u)}))}}function x(e,n,a){if(e.nodes)for(var u=e.nodes.start,t=e.nodes.end,l=n&&(n.f&T)===0?n.nodes.start:a;u!==null;){var o=ge(u);if(l.before(u),u===t)return;u=o}}function A(e,n,a){n===null?e.effect.first=a:n.next=a,a===null?e.effect.last=n:a.prev=n}const Me=Symbol("is custom element"),we=Symbol("is html");function ke(e,n,a,u){var t=Re(e);I&&(t[n]=e.getAttribute(n),n==="src"||n==="srcset"||n==="href"&&e.nodeName==="LINK")||t[n]!==(t[n]=a)&&(n==="loading"&&(e[Te]=a),a==null?e.removeAttribute(n):typeof a!="string"&&He(e).includes(n)?e[n]=a:e.setAttribute(n,a))}function Re(e){return e.__attributes??={[Me]:e.nodeName.includes("-"),[we]:e.namespaceURI===Ae}}var G=new Map;function He(e){var n=e.getAttribute("is")||e.nodeName,a=G.get(n);if(a)return a;G.set(n,a=[]);for(var u,t=e,l=Element.prototype;l!==t;){u=Se(t);for(var o in u)u[o].set&&a.push(o);t=Ne(t)}return a}export{Le as e,xe as i,ke as s};
